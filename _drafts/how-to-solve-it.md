---
layout: post
title: How to solve any programming problem
date: 2025-06-05
lang: pt-BR
category: ["aprendendo-a-aprender"]
private: false
---

# Polya's Framework Summary

1. Understand the problem, what do you know about it?
2. Find the relationthip between known and the unknown (what you wanna find); make a plan.
3. Carry out the plan
4. Lookin back

Lets's see that in practice.

## Task 1

```
- Implement a new `POST /reservations` endpoint to handle reservation creation.
- The request must include:
  - A `price_token` (generated by the `POST /price` endpoint).
  - A `payment_token` (generated by the Mock Payment API via the `POST /payment-tokens` endpoint).
  - Reservation details: `start_at` and `end_at` (as ISO 8601 timestamps).
  - A previously calculated reservation price `amount` in cents (generated by the `POST /price` endpoint).
- On the backend:
  - Authentication is required.
  - The submitted `price_token` must be validated against the relevant parameters in the payload.
  - Reservations are only allowed for dates between today (inclusive) and a maximum of 3 months from today. Any dates outside this range must be rejected.
  - The submitted `amount` must be validated against the backendâ€™s current pricing logic.
  - If the `price_token` and `amount` are valid, initiate the payment by calling `POST /payments` on the Mock Payment API.
  - A `Reservation` record must be created with a status indicating that the payment is in progress.
- Price validation is critical and must prevent manipulation on the client side.
- The server must ensure consistency and avoid duplicate reservations or inconsistent states.
  - Multiple requests with the same payload must be treated as a single reservation attempt.
  - The server must be resilient to double submissions, responding with the original reservation data if a repeated request is received.
```

### Understading the Problem

- What do we want? We want an endpoint that stores reservations
- What do we have?
    - endpoint name and method
    - the payload
- What are the conditions?
    - there must be authentication
    - `price_token` should be validated against the payload (start_at, end_at, amount)
    - reservations are only allowed between today (inclusive) and three months from today.
    - call `POST /payments` if validation passes
    - a reservation record must be created with the payment statuis as `in progress`
    - multiple requests with the same payload must be treated as a single reservation attempt
- Introduce notation: data, calculation, actions

### Let's Introduce a Notation

- Data
- Calculation
- Action

### Devising a Plan

- Have you ever solver a similar problem? Yes, i know how to add endpoints to fastify, i know how to check if data are
    equal
- Do you know any useful tool or solution?
- In a case you don't know how to solve the main problem, try to solve the first related problem.
- Relax/drop some conditions, what do you see? Is it far from what you want?

the plan:

1. get the calculation implemented:
    1. price_token validation; (almost ok)
    2. reservation date validations; (ok)
2. get the actions implemented:
    1. call to payment service;
    2. create the record;
3. get the get everything connected to the http interface.

https://blog.codeminer42.com/three-functional-programming-concepts-to-start-using-today-and-make-your-code-better/

### Carry Out The Plan

Execute the plan and ensure **each step** is correct.

### Look Back

Consider solution from various sides and seek contacts with your formerly acquired knowledge. make the solution as
simple as you can

---

# Data, Calculation and Actions

# Process

## Understand the problem

isolate the principal parts of the problem. consider one by one, consider thme in turn, consider them in various
combinarions, relating each detail to other details and each to the whole of the problem

by doing this you prepare and clarify details which are likely to play a role afterwards

## Hunting for the Helpful idea

> even wrong guesses are important, they get you into the problem

Consider your problem from various sides. Emphasize different parts, examine different details repeatedly but in
different ways

## Carry out the plan

ensure each given step is correct.

## Looking Back

Consider solution from various sides and seek contacts with your formerly acquired knowledge. make the solution as
simple as you can


